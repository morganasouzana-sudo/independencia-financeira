<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Planejador de IndependÃªncia Financeira</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
.container { max-width:1200px; margin:auto; background:#fff; padding:25px; border-radius:10px; }
h1,h2 { text-align:center; }
.grid { display:grid; grid-template-columns:repeat(3,1fr); gap:15px; }
label { font-weight:bold; font-size:14px; }
input { width:100%; padding:6px; }
button { margin-top:20px; padding:12px; width:100%; font-size:16px; background:#2ecc71; color:#fff; border:none; border-radius:5px; }
.cards { display:flex; gap:15px; margin-top:20px; }
.card { flex:1; background:#ecf0f1; padding:15px; border-radius:8px; }
canvas { margin-top:30px; }
</style>
</head>

<body>
<div class="container">

<h1>Planejador de IndependÃªncia Financeira</h1>

<h2>ParÃ¢metros Principais</h2>
<div class="grid">
  <div><label>PatrimÃ´nio Livre Atual</label><input id="patrimonio" type="number" value="100000"></div>
  <div><label>Aporte Mensal Livre</label><input id="aporte" type="number" value="3000"></div>
  <div><label>Anos de AcumulaÃ§Ã£o</label><input id="anos" type="number" value="30"></div>
  <div><label>Saques Mensais no Usufruto</label><input id="saque" type="number" value="8000"></div>
  <div><label>Anos de Usufruto</label><input id="anosUsu" type="number" value="35"></div>
  <div><label>Retorno Real Carteira (%)</label><input id="retorno" type="number" value="7"></div>
</div>

<h2>Balde PrevidÃªncia & FGTS</h2>
<div class="grid">
  <div><label>Saldo PrevidÃªncia</label><input id="prevSaldo" type="number" value="80000"></div>
  <div><label>Aporte Mensal PrevidÃªncia</label><input id="prevAporte" type="number" value="1000"></div>
  <div><label>Retorno PrevidÃªncia (%)</label><input id="prevRet" type="number" value="6"></div>

  <div><label>Saldo FGTS</label><input id="fgtsSaldo" type="number" value="50000"></div>
  <div><label>Aporte Mensal FGTS</label><input id="fgtsAporte" type="number" value="0"></div>
  <div><label>Retorno FGTS (%)</label><input id="fgtsRet" type="number" value="3"></div>
</div>

<label>
  <input type="checkbox" id="usarAlternativos" checked>
  Usar PrevidÃªncia e FGTS no Usufruto
</label>

<button onclick="simular()">Simular Planejamento</button>

<div class="cards">
  <div class="card" id="cardLivre"></div>
  <div class="card" id="cardPrev"></div>
  <div class="card" id="cardFgts"></div>
</div>

<canvas id="grafico"></canvas>

</div>

<script>
let chart;

function simular() {
  let patrimonio = Number(patrimonio.value);
  let aporte = Number(aporte.value);
  let anosAcc = Number(anos.value);
  let saque = Number(saque.value);
  let anosUsu = Number(anosUsu.value);
  let retorno = Number(retorno.value) / 100;

  let prev = Number(prevSaldo.value);
  let prevAporte = Number(prevAporte.value);
  let prevRet = Number(prevRet.value) / 100;

  let fgts = Number(fgtsSaldo.value);
  let fgtsAporte = Number(fgtsAporte.value);
  let fgtsRet = Number(fgtsRet.value) / 100;

  let labels = [], dados = [];

  // ACUMULAÃ‡ÃƒO
  for (let a = 1; a <= anosAcc; a++) {
    patrimonio = patrimonio * (1 + retorno) + aporte * 12;
    prev = prev * (1 + prevRet) + prevAporte * 12;
    fgts = fgts * (1 + fgtsRet) + fgtsAporte * 12;

    labels.push("Ano " + a);
    dados.push(patrimonio);
  }

  // USUFRUTO
  let patrimonioUsufruto = patrimonio;
  if (usarAlternativos.checked) patrimonioUsufruto += prev + fgts;

  for (let u = 1; u <= anosUsu; u++) {
    patrimonioUsufruto = patrimonioUsufruto * (1 + retorno) - saque * 12;
    labels.push("U " + u);
    dados.push(patrimonioUsufruto);
    if (patrimonioUsufruto <= 0) break;
  }

  cardLivre.innerHTML = `<h3>ðŸª£ PatrimÃ´nio Livre</h3><p>R$ ${patrimonio.toLocaleString("pt-BR")}</p>`;
  cardPrev.innerHTML = `<h3>ðŸª£ PrevidÃªncia</h3><p>R$ ${prev.toLocaleString("pt-BR")}</p>`;
  cardFgts.innerHTML = `<h3>ðŸª£ FGTS</h3><p>R$ ${fgts.toLocaleString("pt-BR")}</p>`;

  renderGrafico(labels, dados);
}

function renderGrafico(labels, dados) {
  if (chart) chart.destroy();
  chart = new Chart(document.getElementById("grafico"), {
    type: "line",
    data: {
      labels,
      datasets: [{ label: "PatrimÃ´nio Total no Tempo", data: dados, borderWidth: 2 }]
    },
    options: { responsive:true, plugins:{ legend:{ position:"bottom" } } }
  });
}
</script>

</body>
</html>
