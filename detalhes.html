<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>An√°lise Detalhada</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family:Segoe UI,Arial; background:#f4f6f8; padding:20px; }
.container { max-width:1000px; margin:auto; background:#fff; padding:25px; border-radius:12px; }
.card { background:#ecf0f1; padding:20px; border-radius:8px; margin-top:20px; }
canvas { margin-top:30px; }
</style>
</head>

<body>
<div class="container">

<h1>An√°lise detalhada do plano</h1>

<div class="card" id="risco"></div>
<div class="card" id="crise"></div>

<canvas id="grafico"></canvas>

</div>

<script src="core.js"></script>
<script>
const dados = JSON.parse(localStorage.getItem("plano"));
if (!dados) document.body.innerHTML = "Nenhum plano encontrado.";

/* ===== RISCO ===== */
const risco = riscoRuina(dados);
riscoDiv.innerHTML = `<h3>üßÆ Risco de ru√≠na</h3><p>${risco.toFixed(1)}%</p>`;

/* ===== CRISE ===== */
const crise = simularCrise(dados);
criseDiv.innerHTML = `<h3>üîÑ Crise severa</h3>
<p>${crise?"Sobrevive":"Quebra se a crise ocorrer cedo"}</p>`;

/* ===== GR√ÅFICO ===== */
let labels=[], vals=[];
let p=dados.patrimonio;
for(let i=1;i<=dados.anosAcc;i++){
  p=p*(1+dados.retorno)+dados.aporte*12;
  labels.push("Ano "+i);
  vals.push(p);
}
new Chart(grafico,{
  type:"line",
  data:{labels,datasets:[{label:"Patrim√¥nio",data:vals,borderWidth:2}]}
});
</script>

</body>
</html>
